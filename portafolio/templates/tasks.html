{% extends 'base.html' %}

{% block content %}
<main class="container">
    <div class="row">
        <div class="col-md-6 offset-md-3">
            <h1 class="text-center display-3 py-5">{{tipopagina}}</h1> 
            <ul class="list-group">
                {% for task in tasks %}
                <a class="list-group-item list-group-item-action mb-3" href="{% url 'task_detail' task.id %}" style="border-radius: 10px; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.05);">
                    <header class="d-flex justify-content-between align-items-start">
                        <div>
                            {% if task.important %}
                            <h4 class="fw-bold text-danger mb-1">{{task.title}} ğŸ“Œ</h4>
                            {% else %}
                            <h4 class="fw-bold mb-1">{{task.title}}</h4>
                            {% endif %}
                            <p class="mb-0 text-muted">{{task.description|truncatechars:100}}</p>
                        </div>
                        
                        <div class="text-end ms-3">
                            <p class="mb-1 small text-info">Por: {{task.user.username}}</p>
                            
                            {% if task.created %}
                            <div class="small text-secondary mb-2">Creada: {{task.created|date:'d M Y, H:i'}}</div>
                            {% endif %}
                            {% if task.datecompleted %}
                                <span class="badge bg-success">Completada</span>
                                <div class="small text-muted mt-1">Hecho: {{task.datecompleted|date:'d M Y, H:i'}}</div>
                            {% else %}
                                <span class="badge bg-warning text-dark">Pendiente</span>
                            {% endif %}
                        </div>
                    </header>
                </a>
                {% empty %}
                <div class="alert alert-info text-center">
                    AÃºn no tienes tareas pendientes. Â¡Crea una ahora!
                </div>
                {% endfor %}
            </ul>
        </div>
    </div>
</main>
{% endblock %}